<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<script src="https://unpkg.com/vue@2.5.16/dist/vue.js"></script>
</head>
<body>
	<div id="app">
		<my-component v-bind:message="messageOrigin" :product="product" :email="emailAddress">
		</my-component>
		{{ emailAddress }}
	</div>
	<script>
		var productComponent = {
			render : function(h) {
				return h("div", this.$slots.default);
			}
		};
		var reviewcomponent = {
			render : function(h) {
				return h("div", this.$slots.default);
			}
		};
		Vue.component("my-component", {
			components : {
				ProductComponent : productComponent,
				ReviewComponent : reviewcomponent
			},
			props : {
				message : String,
				product : Object,
				email : {
					type : String,
					required :true,
					default : "none",
					validator : function(value) {
						if ( value.length > 3 ) {
							return true;
						}
					} 
					/* Note that props are validated before a component instance is created.
					so instance properties(e.g data, computed, etc) will not be available 
					inside default or validator functions. */ 
				}
			},
			data : function() {
				return {
					firstName : "Vue",
					lastName : "Mastery",
					counter : 0,
					mail : this.email
				}
			},
			computed : {
				fullName : {
					get : function () {
						return this.firstName + " " + this.lastName;
					},
					set : function(newValue) {
						var names = newValue.split(' ');
						this.firstName = names[0];
						this.lastName = names[names.length -1];
					}		
				}
			},
			watch : {
				firstName : function (value, oldValue) {
					console.log("firstName change : " + oldValue + " => " + value);
				},
				fullName : function (value, oldValue) {
					console.log(value + " from " +oldValue);
				},
				email : function (value, oldValue) {
					if ( value.length > 3 ) {
						this.mail = value;
					}
				}
			},
			methods : {
				countPlus : function() {
					this.counter+= 1;
					alert(this.counter);
				}
			},
			template : `
			<div>
				<span>{{ message }}</span>
				<hr>
				<button v-on:click="countPlus">add</button>
				<hr>
				<ProductComponent>{{ product.name }}</ProductComponent>
				<hr>
				<input v-model.lazy="fullName">
				<ReviewComponent>{{ fullName }} {{ mail }}</ReviewComponent>
			</div>`
		});
		var vm = new Vue({
			el : "#app",
			data : {
				messageOrigin : "Hello Welcome World",
				product : {
					id : 0, name : "computer"
				},
				emailAddress : "aabbcc@.com",
				counter : 0
			}
		});
	</script>
</body>
</html>